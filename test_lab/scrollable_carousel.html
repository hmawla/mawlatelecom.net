<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="pragma" content="no-cache" />
    <title>Scrollable Carousel</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="scrollable_carousel.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="scrollable_carousel.js"></script>
    <script src="js/popmotion.global.min.js"></script>


</head>

<body onload="setScrollableCarouselWidth(9);">
    <br><br><br><br><br><br><br>

    <p id="Coordinator"></p>
    <p id="tester"></p>
    <div class="container" style="overflow:hidden">
        <button onclick="movePrev()">Prev</button>
        <button onclick="moveNext()">Next</button>
        <br><br><br>
        <div id="theDivv" onmousedown="" style="max-width:100%;min-width: 200px; max-height: 25%; min-height:400px; border: solid 5px black;padding:5px; overflow:hidden;">
            <div id="theDiv" style="background-color:yellow;user-select:none;width: 300px;transform: translate(-50px,0px);">
                <div class="card text-center border-primary" style="margin-bottom: 10px;border: solid 5px black;">
                    <img style="cursor: pointer;pointer-events: none;" class="card-img-top" src="samsunggalaxys9.jpg" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">Galaxy S9 Plus</h5>
                        <p class="card-text">999$</p>
                        <a href="#" class="btn btn-primary">Add To Cart</a>
                    </div>
                </div>
                <div class="card text-center border-primary" style="margin-bottom: 10px;border: solid 5px black;">
                    <img style="cursor: pointer;pointer-events: none;" class="card-img-top" src="samsunggalaxys9.jpg" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">Galaxy S9 Plus</h5>
                        <p class="card-text">999$</p>
                        <a href="#" class="btn btn-primary">Add To Cart</a>
                    </div>
                </div>
                <div class="card text-center border-primary" style="margin-bottom: 10px;border: solid 5px black;">
                    <img style="cursor: pointer;pointer-events: none;" class="card-img-top" src="samsunggalaxys9.jpg" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">Galaxy S9 Plus</h5>
                        <p class="card-text">999$</p>
                        <a href="#" class="btn btn-primary">Add To Cart</a>
                    </div>
                </div>
                <div class="card text-center border-primary" style="margin-bottom: 10px;border: solid 5px black;">
                    <img style="cursor: pointer;pointer-events: none;" class="card-img-top" src="samsunggalaxys9.jpg" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">Galaxy S9 Plus</h5>
                        <p class="card-text">999$</p>
                        <a href="#" class="btn btn-primary">Add To Cart</a>
                    </div>
                </div>
                <div class="card text-center border-primary" style="margin-bottom: 10px;border: solid 5px black;">
                    <img style="cursor: pointer;pointer-events: none;" class="card-img-top" src="samsunggalaxys9.jpg" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">Galaxy S9 Plus</h5>
                        <p class="card-text">999$</p>
                        <a href="#" class="btn btn-primary">Add To Cart</a>
                    </div>
                </div>
                <div class="card text-center border-primary" style="margin-bottom: 10px;border: solid 5px black;">
                    <img style="cursor: pointer;pointer-events: none;" class="card-img-top" src="samsunggalaxys9.jpg" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">Galaxy S9 Plus</h5>
                        <p class="card-text">999$</p>
                        <a href="#" class="btn btn-primary">Add To Cart</a>
                    </div>
                </div>
                <div class="card text-center border-primary" style="margin-bottom: 10px;border: solid 5px black;">
                    <img style="cursor: pointer;pointer-events: none;" class="card-img-top" src="samsunggalaxys9.jpg" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">Galaxy S9 Plus</h5>
                        <p class="card-text">999$</p>
                        <a href="#" class="btn btn-primary">Add To Cart</a>
                    </div>
                </div>
                <div class="card text-center border-primary" style="margin-bottom: 10px;border: solid 5px black;">
                    <img style="cursor: pointer;pointer-events: none;" class="card-img-top" src="samsunggalaxys9.jpg" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">Galaxy S9 Plus</h5>
                        <p class="card-text">999$</p>
                        <a href="#" class="btn btn-primary">Add To Cart</a>
                    </div>
                </div>
                <div class="card text-center border-primary" style="margin-bottom: 10px;border: solid 5px black;">
                    <img style="cursor: pointer;pointer-events: none;" class="card-img-top" src="samsunggalaxys9.jpg" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">Galaxy S9 Plus</h5>
                        <p class="card-text">999$</p>
                        <a href="#" class="btn btn-primary">Add To Cart</a>
                    </div>
                </div>
            </div>

        </div>

    </div>

    <script>
        var oldX;
        var moveX = 0;
        var newX;
        var pos;
        var attached = false;
        var theDiv = document.getElementById('theDiv');
        var _window$popmotion = window.popmotion;
        var listen = _window$popmotion.listen;
        const theDivv = document.querySelector('#theDivv');
        var pointX, pointY;
        const {
            pointer
        } = window.popmotion;
        var pointerTracker;
        var tracking = false;
        const onTracking = listen(document, 'mousemove touchmove').filter(() => tracking);

        const startTracking = () => {
            tracking = true;
            pointerTracker = pointer()
                .start(({
                    x
                }) => pointX = x);
            console.log("f- oldX = " + oldX + "    pointX = " + pointX);
            oldX = pointX;
            console.log("s- oldX = " + oldX + "    pointX = " + pointX);
            onTracking.start(attachMove);
            document.getElementById('tester').innerHTML = attached + '<br>' + pointX + '<BR>';;
        }

        const stopTracking = () => {
            tracking = false;
            if (pointerTracker) pointerTracker.stop();
            listen(document, 'mousemove touchmove').start(attachMove).stop();
            document.getElementById('tester').innerHTML = attached + '<br>' + pointX + '<BR>';
        };

        listen(theDivv, 'mousedown touchstart').start(startTracking);
        listen(document, 'mouseup touchend').start(stopTracking);

        function EnableAttached() {

        }

        function DisableAttached() {

        }

        function attachMove() {
            moveX = 0;
            console.log("1-x = " + newX);
            newX = pointX;
            console.log("2-x = " + newX);
            var coor;
            console.log("1-moveX = " + moveX + "    oldX = " + oldX);
            moveX = oldX - newX;
            console.log("2-moveX = " + moveX);
            coor = "Position" + pos + "<br>X coords: " + newX + "<br> old x: " + oldX + "<br> Move: " + moveX + "<br> Is attached? " + attached;
            var style = window.getComputedStyle(theDiv);
            var matrix = new WebKitCSSMatrix(style.webkitTransform);
            pos = matrix.m41;
            theDiv.style.transform = "translateX(" + (pos - moveX) + "px)";
            oldX = newX;
            document.getElementById('Coordinator').innerHTML = coor;


        }

        function setScrollableCarouselWidth(theRightWidth) {
            theDiv.style.width = 300 * theRightWidth + "px";
        }
    </script>

</body>

</html>